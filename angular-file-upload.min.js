!function(a,b){return"function"==typeof define&&define.amd?(define("angular-file-upload",["angular"],function(a){return b(a)}),void 0):b(a)}(angular||null,function(a){var b=a.module("angularFileUpload",[]);return b.directive("ngFileDrop",function(){"use strict";return{link:window.File?function(a,b,c){b.bind("drop",function(b){var d=b.dataTransfer?b.dataTransfer:b.originalEvent.dataTransfer;b.preventDefault(),b.stopPropagation(),a.$broadcast("file:removeoverclass"),a.$emit("file:add",d.files,a.$eval(c.ngFileDrop))}).bind("dragover",function(b){var c=b.dataTransfer?b.dataTransfer:b.originalEvent.dataTransfer;b.preventDefault(),b.stopPropagation(),c.dropEffect="copy",a.$broadcast("file:addoverclass")}).bind("dragleave",function(){a.$broadcast("file:removeoverclass")})}:a.noop}}),b.directive("ngFileOver",function(){"use strict";return{link:function(a,b,c){a.$on("file:addoverclass",function(){b.addClass(c.ngFileOver||"ng-file-over")}),a.$on("file:removeoverclass",function(){b.removeClass(c.ngFileOver||"ng-file-over")})}}}),b.directive("ngFileSelect",function(){"use strict";return{link:function(a,b,c){window.File&&window.FormData||b.removeAttr("multiple"),b.bind("change",function(){a.$emit("file:add",this.files?this.files:this,a.$eval(c.ngFileSelect))})}}}),b.service("$fileUploader",["$compile","$rootScope",function(b,c){"use strict";function d(b){a.extend(this,{scope:c,url:"/",alias:"file",queue:[],headers:{},progress:null,autoUpload:!1,removeAfterUpload:!1,filters:[],isUploading:!1,_uploadNext:!1,_observer:c.$new(!0)},b),this.filters.unshift(this._filter),c.$on("file:add",function(a,b,c){this.addToQueue(b,c)}.bind(this)),this._observer.$on("beforeupload",e.prototype._beforeupload),this._observer.$on("in:progress",e.prototype._progress),this._observer.$on("in:success",e.prototype._success),this._observer.$on("in:error",e.prototype._error),this._observer.$on("in:complete",e.prototype._complete),this._observer.$on("changedqueue",this._changedQueue.bind(this)),this._observer.$on("in:progress",this._progress.bind(this)),this._observer.$on("in:complete",this._complete.bind(this))}function e(d){if(a.isElement(d.file)){var e=a.element(d.file),f=b(e.clone())(c.$new(!0)),g=a.element('<form style="display: none;" />'),h=a.element('<iframe name="iframeTransport'+ +new Date+'">'),i=e.val();d.file={lastModifiedDate:null,size:null,type:"like/"+i.replace(/^.+\.(?!\.)|.*/,""),name:i.match(/[^\\]+$/)[0],_form:g},e.after(f).after(g),g.append(e).append(h)}a.extend(this,{progress:null,isUploading:!1,isUploaded:!1},d)}return d.prototype={_filter:function(b){return a.isElement(b)?!0:!!b.size},bind:function(a,b){this._observer.$on(a,b.bind(this))},hasHTML5:function(){return window.File&&window.FormData},addToQueue:function(b,c){var d=this.queue.length;a.forEach("length"in b?b:[b],function(b){var d=this.filters.length?this.filters.every(function(a){return a.call(this,b)},this):!0;d&&(b=new e(a.extend({url:this.url,alias:this.alias,headers:a.extend({},this.headers),removeAfterUpload:this.removeAfterUpload,uploader:this,file:b},c||{})),this.queue.push(b),this._observer.$emit("afteraddingfile",b))},this),this.queue.length!==d&&(this._observer.$emit("afteraddingall",this.queue),this._observer.$emit("changedqueue",this.queue)),this.autoUpload&&this.uploadAll()},removeFromQueue:function(b){var c=a.isObject(b)?this.getIndexOfItem(b):b,d=this.queue.splice(c,1)[0];d.file._form&&d.file._form.remove(),this._observer.$emit("changedqueue",d)},clearQueue:function(){a.forEach(this.queue,function(a){a.file._form&&a.file._form.remove()},this),this.queue.length=0,this._observer.$emit("changedqueue",this.queue)},getIndexOfItem:function(a){return this.queue.indexOf(a)},getNotUploadedItems:function(){return this.queue.filter(function(a){return!a.isUploaded})},uploadItem:function(b){if(!this.isUploading){var c=a.isObject(b)?this.getIndexOfItem(b):b,d=this.queue[c],e=d.file._form?"_iframeTransport":"_xhrTransport";this.isUploading=!0,this[e](d)}},uploadAll:function(){var a=this.getNotUploadedItems()[0];this._uploadNext=!!a,this._uploadNext&&this.uploadItem(a)},_getTotalProgress:function(a){if(this.removeAfterUpload)return a||0;var b=this.getNotUploadedItems().length,c=b?this.queue.length-b:this.queue.length,d=100/this.queue.length,e=(a||0)*d/100;return Math.round(c*d+e)},_progress:function(a,b,c){var d=this._getTotalProgress(c);this.progress=d,this._observer.$emit("progressall",d),this.scope.$$phase||this.scope.$apply()},_complete:function(){this.isUploading=!1,this._uploadNext&&this.uploadAll(),this._uploadNext||this._observer.$emit("completeall",this.queue),this._uploadNext&&this.scope.$$phase||this.scope.$apply()},_changedQueue:function(){this.progress=this._getTotalProgress(),this.scope.$$phase||this.scope.$apply()},_xhrTransport:function(b){var c=new XMLHttpRequest,d=new FormData,e=this;d.append(b.alias,b.file),c.upload.addEventListener("progress",function(a){var c=a.lengthComputable?100*a.loaded/a.total:0;e._observer.$emit("in:progress",b,Math.round(c))},!1),c.addEventListener("load",function(){200===c.status&&e._observer.$emit("in:success",c,b),200!==c.status&&e._observer.$emit("in:error",c,b),e._observer.$emit("in:complete",c,b)},!1),c.addEventListener("error",function(){e._observer.$emit("in:error",c,b),e._observer.$emit("in:complete",c,b)},!1),c.addEventListener("abort",function(){e._observer.$emit("in:complete",c,b)},!1),this._observer.$emit("beforeupload",b),c.open("POST",b.url,!0),a.forEach(b.headers,function(a,b){c.setRequestHeader(b,a)}),c.send(d)},_iframeTransport:function(a){var b=a.file._form,c=b.find("iframe"),d=b.find("input"),e=this;d.prop("name",a.alias),b.prop({action:a.url,method:"post",target:c.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),c.unbind("load").bind("load",function(){var b={response:c.contents(),status:200,dummy:!0};e._observer.$emit("in:complete",b,a)}),this._observer.$emit("beforeupload",a),b[0].submit()}},e.prototype={remove:function(){this.uploader.removeFromQueue(this)},upload:function(){this.uploader.uploadItem(this)},_beforeupload:function(a,b){b.isUploaded=!1,b.isUploading=!0,b.progress=null},_progress:function(a,b,c){b.progress=c,b.uploader._observer.$emit("progress",b,c)},_success:function(a,b,c){c.isUploaded=!0,c.isUploading=!1,c.uploader._observer.$emit("success",b,c)},_error:function(a,b,c){c.isUploading=!1,c.uploader._observer.$emit("error",b,c)},_complete:function(a,b,c){c.isUploaded=200===b.status,c.uploader._observer.$emit("complete",b,c),c.removeAfterUpload&&c.remove()}},{create:function(a){return new d(a)}}}]),b});
/*
//@ sourceMappingURL=angular-file-upload.min.map
*/